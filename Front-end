# ====================== STREAMLIT UI ======================
st.set_page_config(
    page_title="Indian Income Tax Calculator",
    page_icon="ğŸ’¼",
    layout="wide"
)

# -------------------- SIDEBAR --------------------
st.sidebar.markdown("## ğŸ’¼ Payroll Tax Dashboard")
st.sidebar.markdown("Automated Old vs New Regime Comparison")

uploaded_file = st.sidebar.file_uploader(
    "ğŸ“ Upload Employee CSV",
    type=["csv"],
    help="Required columns: Name, Department, Age, grossincome, Deductions"
)

st.sidebar.markdown("---")
st.sidebar.markdown("### â„¹ Important Notes")
st.sidebar.markdown("""
â€¢ Standard Deduction â‚¹50,000 applied  
â€¢ FY 2024-25 rules used  
â€¢ Health & Education Cess @4%  
â€¢ Marginal Relief included  
""")

st.sidebar.markdown("---")
st.sidebar.caption("Built for HR â€¢ CA â€¢ Finance Teams")

# -------------------- HEADER --------------------
st.markdown(
    """
    <div style='text-align:center'>
        <h1>ğŸ‡®ğŸ‡³ Indian Income Tax Calculator</h1>
        <p style='color:grey'>Old Regime vs New Regime | Payroll & Compliance Tool</p>
    </div>
    """,
    unsafe_allow_html=True
)

# -------------------- MAIN LOGIC --------------------
if uploaded_file is not None:
    try:
        df_input = pd.read_csv(uploaded_file)

        required_cols = {"Name", "Depa_
